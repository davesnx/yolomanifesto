language: node_js
node_js:
  - 8

cache:
  directories:
    - "node_modules"

before_script:
  - yarn run lint
  - yarn run build

script:
  - yarn test

after_script:
  - yarn add now
  - test $TRAVIS_BRANCH = "master" && now --token $NOW_TOKEN --public alias

deploy:
  provider: script
  script: now --token $NOW_TOKEN --public
  on:
    branch: master
  condition: $TRAVIS_EVENT_TYPE = "push"
  skip_cleanup: true
